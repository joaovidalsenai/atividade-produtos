<%- include('partials/header') %>

<div class="d-flex justify-content-between align-items-center mb-3">
    <h2 class="h4">Produtos</h2>
    <a href="/produtos/novo" class="btn btn-primary btn-sm">Novo</a>
</div>

<div class="table-responsive">
    <table class="table table-striped table-hover align-middle">
        <thead class="table-light">
            <tr>
                <th>Id</th>
                <th>Nome</th> <th>Descrição</th>
                <th>Quantidade</th>
                <th>Valor</th>
                <th>Data</th>
                <th>Editar</th>
                <th>Deletar</th>
            </tr>
        </thead>
        <tbody>
            <% produtos.forEach(produto => { %>
                <tr>
                    <td><%= produto.id %></td>
                    <td><%= produto.nome %></td> <td><%= produto.descricao %></td>
                    <td><%= produto.quantidade %></td>
                    <td>R$ <%= parseFloat(produto.valor).toFixed(2) %></td>
                    <td>
                        <% if (produto.data) { %>
                           <%= new Date(produto.data).toLocaleDateString('pt-BR', {timeZone: 'UTC'}) %>
                        <% } %>
                    </td>
                    <td>
                        <a href="/produtos/editar/<%= produto.id %>" class="btn btn-link btn-sm p-0">Editar</a>
                    </td>
                    
                    <td>
                        <form action="/produtos/deletar/<%= produto.id %>" method="POST" style="display: inline;">
                            <button type="submit" class="btn btn-link btn-sm text-danger p-0">Deletar</button>
                        </form>
                    </td>
                    </tr>
            <% }); %>
            <% if (produtos.length === 0) { %>
                <tr>
                    <td colspan="8" class="text-center">Nenhum produto cadastrado.</td>
                </tr>
            <% } %>
        </tbody>
    </table>
</div>

<%- include('partials/footer') %>